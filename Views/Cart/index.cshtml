@model ClothingWebApp.Models.Cart

@{
    ViewData["Title"] = "Shopping Cart";
}

<h1>Shopping Cart</h1>

@if (Model != null && Model.Products != null && Model.Products.Any())
{
    <div class="table-responsive">
        <table class="table">
            <thead>
                <tr>
                    <th>Product</th>
                    <th>Price</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <!-- In the tbody section of the table -->
<tbody>
    @foreach (var item in Model.Products)
    {
        <tr>
            <td>
                <div class="d-flex align-items-center">
                    @if (!string.IsNullOrEmpty(item.ImageUrl))
                    {
                        <img src="@item.ImageUrl" alt="@item.Name" style="width: 50px; height: 50px; object-fit: cover;" class="me-3">
                    }
                    <div>
                        <strong>@item.Name</strong>
                        <br/>
                        <small class="text-muted">
                            @item.Color
                            @if (!string.IsNullOrEmpty(item.Size))
                            {
                                <span> - Size: @item.Size</span>
                            }
                        </small>
                    </div>
                </div>
            </td>
            <td>@item.Price.ToString("C")</td>
            <td>
                <form asp-action="RemoveFromCart" method="post">
                    <input type="hidden" name="productId" value="@item.ProductId" />
                    <button type="submit" class="btn btn-sm btn-danger">Remove</button>
                </form>
            </td>
        </tr>
    }
</tbody>
            <tfoot>
                <tr>
                    <th>Total</th>
                    <th>@Model.Products.Sum(p => p.Price).ToString("C")</th>
                    <th></th>
                </tr>
            </tfoot>
        </table>
    </div>
    
    <div class="mt-4">
        <a asp-action="Checkout" class="btn btn-success">Checkout</a>
        <a asp-controller="Home" asp-action="Index" class="btn btn-secondary">Continue Shopping</a>
    </div>
}
else
{
    <div class="alert alert-info">
        Your cart is empty. <a asp-controller="Home" asp-action="Index">Continue shopping</a>.
    </div>
}